# krischerven.info (SSL)
server {

  listen 443 ssl;
  ssl_certificate /home/dev/portfolio-webpage/SSL/krischerven_info_chain.crt;
  ssl_certificate_key /home/dev/portfolio-webpage/SSL/krischerven_info.pem;

  server_name krischerven.info www.krischerven.info;

  location / {
    include proxy_params;
    proxy_pass http://unix:/home/dev/portfolio-webpage/portfolio-webpage.sock;
  }
}

# krischerven.info (no SSL)
server {

  listen 80;
  server_name krischerven.info www.krischerven.info;

  location / {
    include proxy_params;
    proxy_pass http://unix:/home/dev/portfolio-webpage/portfolio-webpage.sock;
  }

  # HTTPS redirection
  return 301 https://krischerven.info$request_uri;
}

# git.krischerven.info (SSL)
server {

  listen 443 ssl;
    ssl_certificate /etc/letsencrypt/live/git.krischerven.info/fullchain.pem; # managed by Certbot
    ssl_certificate_key /etc/letsencrypt/live/git.krischerven.info/privkey.pem; # managed by Certbot

  server_name git.krischerven.info;

  location / {
    include proxy_params;
    proxy_pass https://krischerven.info:3000;
  }

}
